{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["disco","App","useState","narcissus","setNarcissus","mainRef","useRef","flower","media","useLayoutEffect","console","log","current","blob","Blob","type","url","URL","createObjectURL","narci","document","getElementsByClassName","length","image","createElement","src","className","addEventListener","revokeObjectURL","once","setTimeout","split","join","appendChild","updateImage","init","a","getFrameSet","preset","setSVG","getFrameData","state","id","getData","axios","get","response","data","error","configureFilter","atomicId","plinko","charCodeAt","setFilter","setDisco","startDisco","n","setInterval","style","filter","getElementById","innerHTML","oid","getAtomicId","attn_state","frame","list","task","attentionReport","change","max","i","item","Object","keys","includes","aScore","ratio","window","location","pathname","frameToSet","Promise","resolve","reject","obj","err","useEffect","Fragment","ref","href","last","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.cd9183da.chunk.js","sourcesContent":["import React, { useState, useEffect, useLayoutEffect, useRef } from \"react\";\n\n// import * as kweb from \"@_koi/sdk/web\";\n// import gifFrames from \"gif-frames\";\nimport axios from 'axios';\nimport media from \"./narcissus.json\";\n\n// import SmartWeave from \"smartweave\";\n\nimport \"./App.css\";\n\n// console.log('narcissus', media, media.length)\n// const ktools = new kweb.Web();\n\n// console.log(\"ktools\", ktools);\n\nlet state;\nlet id;\nlet disco;\n// let koii;\n\nfunction App() {\n  const [narcissus, setNarcissus] = useState(<canvas></canvas>);\n  const mainRef = useRef(null)\n  const flower = media;\n\n  function updateImage () {\n    // console.log(\"update narcissus\", mainRef);\n    if (!mainRef.current) {\n      \n      // console.log('not updating narcissus because', mainRef.current)\n      \n      return;\n    } else {\n      // console.log('about to append because main is', mainRef.current)\n\n      let blob = new Blob([narcissus], {type: 'image/svg+xml'});\n\n      let url = URL.createObjectURL(blob);\n\n      // console.log('got url', url)\n\n      let narci = document.getElementsByClassName('narcissus');\n\n      if (narci.length < 1) {\n        let image = document.createElement('img');\n            image.src = url;\n            image.className = \"narcissus hide\";\n            // image.style = getCenteredStyle();\n  \n            image.addEventListener('load', () => URL.revokeObjectURL(url), {once: true});\n\n        // console.log('image', image)\n\n        setTimeout(function () {\n          let narci = document.getElementsByClassName('narcissus')[0];\n          narci.className = narci.className.split('hide').join('')\n        }, 1200)\n  \n        mainRef.current.appendChild(image); \n      } else {\n        narci[0].src = url;\n      }\n    }\n  }\n\n  // useLayoutEffect(() => {\n  //   console.log('triggered score update');\n  //   // updateScore(score);\n\n  //   // Clean up\n  //   return () => {\n  //     // var spans = document.getElementsByClassName('scoreSpan')\n  //     // for ( let span of spans ) {\n  //     //   span.remove()\n  //     // }\n  //   };\n  // }, [score]);\n\n  \n  useLayoutEffect(() => {\n    console.log('triggered image update')\n    updateImage();\n\n    // Clean up\n    return () => {\n    };\n  }, [narcissus]);\n\n  /* -- Functions -- */\n\n  const init = async () => {\n    console.log('about to fetch frame data')\n    let preset = await getFrameSet ();\n    if ( preset ) {\n      setSVG(preset)\n    } else {\n      setSVG(1)\n      getFrameData()\n    } \n    return { state, id };  \n  };\n\n  async function getData (url) {\n    try {\n      const response = await axios.get(url);\n      console.log(response);\n      return response.data;\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function configureFilter (atomicId) {\n    let plinko = atomicId.charCodeAt(0)\n    // console.log('plinko is ', plinko)\n    if ( plinko < 50 ) {\n      // console.log('in 1')\n      setFilter('filter: saturate(140%) brightness(127%) hue-rotate( -56deg) sepia(34%) contrast(85%)')\n    } else if ( plinko < 75 ) {\n      // console.log('in 2')\n      setFilter('filter: saturate(125%) brightness(145%) hue-rotate( -15deg) sepia(8%);')\n    } else if ( plinko < 85 ) {\n      // console.log('in 3')\n      setFilter('filter: hue-rotate(268deg) saturate(100%) sepia(41%) brightness(91%) contrast(88%);')\n    } else if ( plinko < 92 ) {\n      setFilter('filter: saturate(145%) brightness(150%) contrast(94%) hue-rotate(4deg);')\n    } else if ( plinko < 95 ) {\n      setFilter('filter: invert(16%) sepia(32%) saturate(121%) hue-rotate(-166deg) contrast(180%) brightness(110%);')\n    } else if ( plinko < 102 ) {\n      setFilter('filter: saturate(210%) contrast(105%) hue-rotate(7deg);')\n    } else if ( plinko < 104 ) {\n      setFilter('filter: saturate(0) brightness(160%);')\n    } else if ( plinko < 107 ) {\n      setFilter(' filter: saturate(160%) invert(100%) hue-rotate(68deg) sepia(10%);')\n    } else if ( plinko < 109 ) {\n      setFilter('filter: saturate(237%) invert(1) hue-rotate(243deg) sepia(15%);')\n    } else if ( plinko < 114 ) {\n      setFilter('filter: saturate(80%) brightness(134%) hue-rotate(-51deg) invert(93%) contrast(116%)')\n    } else if ( plinko < 122 ) {\n      setFilter('filter: saturate(140%) brightness(127%) hue-rotate(47deg) sepia(34%) contrast(500%);')\n    }\n    if ( plinko % 10 === 0 ) {\n      // console.log('disco time!!!', plinko)\n      setDisco()\n    }\n  }\n\n  async function setDisco () {\n    // console.log('disco time!')\n    if ( !disco ) startDisco();\n    disco = true;\n  }\n\n  function startDisco () {\n    let n = 0;\n    setInterval(() => {\n      document.getElementsByClassName('narcissus')[0].style.filter = 'brightness(120%) hue-rotate(' + n + 'deg)'\n\n      n = n + 15;\n      if (n > 100000) n = 0;\n    }, 100)\n  }\n\n  async function setFilter (filter) {\n    console.log('setting filter', filter)\n    document.getElementById('color_filter').innerHTML = `\n        img.narcissus {\n          ${ filter }\n        }\n    `\n  }\n\n  async function getFrameData() {\n    try {\n      var oid = getAtomicId() || '3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc';\n      console.log('oid is', oid)\n      configureFilter(oid)\n      \n      // var nft_state = await getData('https://mainnet.koii.live/attention/nft?id=' + oid);\n\n      // var koii_state = await getData('https://mainnet.koii.live/state/current/');\n      var attn_state = await getData('https://mainnet.koii.live/attention/');\n      \n      // contract state\n      let frame = 1;\n      let list = attn_state.task.attentionReport;\n      // let list = [{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 1\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 2\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 4\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 35\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 43\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 65\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 88\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 100\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 101\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 102\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 103\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 104\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 105\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 106\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 107\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 108\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 109\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 110\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 111\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 112\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 113\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 114\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 115\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 116\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 117\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 118\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 119\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 120\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 121\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 122\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 123\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 124\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 125\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 126\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 127\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 128\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 129\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 130\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 131\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 132\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 133\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 0\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 119\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 120\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 121\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 122\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 123\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 124\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 125\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 126\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 127\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 128\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 129\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 130\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 131\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 132\n      //   },{\n      //     \"1n_12893y12-3891e1dafasdf\": 14,\n      //     \"12074-1nc12-r0ujx12-d-12_\": 5,\n      //     \"3gaVfUdeRdT5rsaEuLebaJjsDMPGT5C5ID0lmu6eSDc\" : 133\n      //   }]\n\n      // looping variables\n      let change = 0;\n      let max = 0;\n\n      const peak = 43;\n      const dead = 66;\n\n      if ( !frame ) frame = 1;\n      if ( !max ) max = 1;\n\n      for ( let i = 0; i < list.length; i++ ) {\n        let item = list[i]\n        setTimeout(() => {\n          // console.log('checking', item, 'change is ', change)\n          if ( typeof(item) !== \"undefined\" && Object.keys(item).includes(oid) ) {\n            if ( typeof(item[oid]) !== \"undefined\" ) {\n              let aScore = item[oid];\n              if ( aScore < max ) {\n                // DECAY FUNCTIONALITY\n    \n                // if the score is less than the max, check if the current frame is >43 \n    \n                // if it is, then we should move up, not down, and begin to wilt\n                if ( frame + change === peak || frame + change >= peak ) {\n                  max = max / 2;\n                  change = change + 1; // move one frame further\n                } \n                // otherwise, we do nothing (no change)\n              } else {\n                // if we have a new max we get a major boost\n                console.log('new max!', max, aScore, frame, peak)\n                if ( frame + change >= peak )  {\n                  console.log('got one!!')\n                  max = max / 2;\n                  change = change - 1; // move closer to the peak (anti-wilt)\n                } else if ( (frame + change) < peak ) {\n                  var ratio = (aScore - max) / max;\n                  console.log('ratio is', ratio)\n                  if ( ratio > 0.10 ) {\n                    change = change + 2; \n                  } else if ( ratio > 0.5 ) { \n                    change = change + 3; \n                  } else if ( ratio > 1.0 ) { \n                    change = change + 4; \n                  } else if ( ratio > 3.0 ) { \n                    change = change + 5; \n                  } else {\n                    // default\n                    change = change + 1; // move one frame further\n                  }\n                } else {\n                  console.log('frame greater than peak!!!')\n                  // change = change - 1; // if the flower is dying, it gets revived by a new max score\n                  // do nothing, the flower stays blossomed\n                }\n  \n                max = aScore;\n              }\n            }\n            \n          }\n          setSVG(frame + change)\n\n        }, i*100)\n      }\n    } catch (err) {\n      setSVG(1)\n    }\n  }\n\n  function getAtomicId () {\n    return (window.location.pathname).split('/')[1];\n  }\n\n  async function setSVG(frameToSet) {\n    console.log('setSVG', frameToSet)\n    return new Promise(function (resolve, reject) {\n      try {\n        // console.log('narcissus', flower.length)\n        let obj = \"\";\n        // obj = obj + getSVGContents(flower[index])\n        // obj = flower[index]\n        // for (let x = 0; x < frameToSet; x++ ) {\n          // setTimeout( function () {\n            // obj = obj + getSVGContents(flower[index])\n            obj = flower[frameToSet]\n            setNarcissus(obj);\n            // console.log(index)\n          // }, frameToSet*100)\n        // }\n        // console.log('about to set narcissus', obj)\n        // console.log('about to set narcissus', typeof(obj))\n        // setLoading(false);\n        resolve(obj);\n      } catch (err) { \n\n        console.log(\"err\", err);\n        reject(err);\n      }\n    });\n  }\n\n  // function getSVGContents(inputString){\n  //     let domParser = new DOMParser();\n  //     let svgDOM = domParser.parseFromString(inputString, 'text/xml')\n  //         .getElementsByTagName('svg')[0];\n  //     return svgDOM.innerHTML\n  // }\n\n  useEffect(() => {\n    console.log('init')\n    init();\n  }, [])\n  \n  return (\n    <div className=\"App\">\n      {/* {loading && (\n        // <img alt=\"this is the loading icon\" src={window.location.origin + \"/img/narcissus.gif\"} />\n      )} */}\n      {/* {!loading && ( */}\n        <React.Fragment>\n          <header></header>\n          <main ref={mainRef}>\n          </main>\n        </React.Fragment>\n      {/* )} */}\n    </div>\n  );\n\n}\n\nexport default App;\n\n// function getCenteredStyle ( ) {\n//   let img = {\n//     w : 600,\n//     h : 337\n//   };\n\n//   var newStyle = {\n//     width : 500,\n//     height : 500,\n//     left : 0,\n//     top : 0\n//   };\n\n//   if ( window.innerWidth > 500 ) {\n    \n//   }\n\n//   let style = \"width:${newStyle.width};height:${newStyle.height};left:${newStyle.left};top:${newStyle.top};\"\n//   return style;\n\n// }\n \n// function insideIframe () {\n//   if ( window.location !== window.parent.location ) {\t  \n//     return true;\n//   } else {\t \n//     return false;\t\n//   }\n// }\n// need to fetch the attention logs from koi state\n// then, iterate over the logs and sum the total attention\n// then, check the last time the nft was updated\n// then, check the nft's decay from it's state.decay\n// then, increment counters based on the difference of current block height and the block height at last adjustment\n// then, adjust the 'durability' score\n\nasync function getFrameSet( ) {\n  if ( window.location.href.includes('set_frame=') ) {\n    var last = window.location.href.split('set_frame=')[1]\n    if (last.includes('&') ) {\n      if(last.split('&')[0]) return last.split('&')[0];\n    } else {\n      return last.split('&')[0];\n    }\n  }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}