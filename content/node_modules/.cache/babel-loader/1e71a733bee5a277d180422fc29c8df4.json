{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unpackTags = exports.decodeTagAt = exports.decodeTag = exports.decodeData = void 0;\n/**\r\n * Decode the data content of a DataItem, either to a string or Uint8Array of bytes\r\n *\r\n * @param deps\r\n * @param d\r\n * @param param2\r\n */\n\nfunction decodeData(deps, d, options = {\n  string: false\n}) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (options.string) {\n      return deps.utils.b64UrlToString(d.data);\n    } else {\n      return deps.utils.b64UrlToBuffer(d.data);\n    }\n  });\n}\n\nexports.decodeData = decodeData;\n/**\r\n * Decode an individual tag from a DataItem. Always decodes name and value as strings\r\n *\r\n * @param deps\r\n * @param tag\r\n */\n\nfunction decodeTag(deps, tag) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return {\n      name: deps.utils.b64UrlToString(tag.name),\n      value: deps.utils.b64UrlToString(tag.value)\n    };\n  });\n}\n\nexports.decodeTag = decodeTag;\n/**\r\n * Decodes an individual tag from a DataItem at index. Throws if index is out of bounds.\r\n *\r\n */\n\nfunction decodeTagAt(deps, d, index) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (d.tags.length < index - 1) {\n      throw new Error(`Invalid index ${index} when tags array has ${d.tags.length} tags`);\n    }\n\n    return decodeTag(deps, d.tags[index]);\n  });\n}\n\nexports.decodeTagAt = decodeTagAt;\n/**\r\n * Unpack all tags in a DataItem into a key value map of\r\n *\r\n * `name: string | string[]`\r\n *\r\n * Always decodes as string values, maintains the order\r\n * the tags were seriliazed in when converting a collection\r\n * of tags with the same key.\r\n *\r\n * @param deps\r\n * @param d\r\n */\n\nfunction unpackTags(deps, d) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const tags = {};\n\n    for (const tag of d.tags) {\n      const {\n        name,\n        value\n      } = yield decodeTag(deps, tag);\n\n      if (!tags.hasOwnProperty(name)) {\n        tags[name] = value;\n        continue;\n      }\n\n      tags[name] = [...tags[name], value];\n    }\n\n    return tags;\n  });\n}\n\nexports.unpackTags = unpackTags;","map":{"version":3,"sources":["/home/al/Desktop/koi/narcissus/content/node_modules/arweave-bundles/lib/ar-data-read.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","unpackTags","decodeTagAt","decodeTag","decodeData","deps","d","options","string","utils","b64UrlToString","data","b64UrlToBuffer","tag","name","index","tags","length","Error","hasOwnProperty"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.unpackTags = exports.decodeTagAt = exports.decodeTag = exports.decodeData = void 0;\r\n/**\r\n * Decode the data content of a DataItem, either to a string or Uint8Array of bytes\r\n *\r\n * @param deps\r\n * @param d\r\n * @param param2\r\n */\r\nfunction decodeData(deps, d, options = { string: false }) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (options.string) {\r\n            return deps.utils.b64UrlToString(d.data);\r\n        }\r\n        else {\r\n            return deps.utils.b64UrlToBuffer(d.data);\r\n        }\r\n    });\r\n}\r\nexports.decodeData = decodeData;\r\n/**\r\n * Decode an individual tag from a DataItem. Always decodes name and value as strings\r\n *\r\n * @param deps\r\n * @param tag\r\n */\r\nfunction decodeTag(deps, tag) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return {\r\n            name: deps.utils.b64UrlToString(tag.name),\r\n            value: deps.utils.b64UrlToString(tag.value),\r\n        };\r\n    });\r\n}\r\nexports.decodeTag = decodeTag;\r\n/**\r\n * Decodes an individual tag from a DataItem at index. Throws if index is out of bounds.\r\n *\r\n */\r\nfunction decodeTagAt(deps, d, index) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (d.tags.length < index - 1) {\r\n            throw new Error(`Invalid index ${index} when tags array has ${d.tags.length} tags`);\r\n        }\r\n        return decodeTag(deps, d.tags[index]);\r\n    });\r\n}\r\nexports.decodeTagAt = decodeTagAt;\r\n/**\r\n * Unpack all tags in a DataItem into a key value map of\r\n *\r\n * `name: string | string[]`\r\n *\r\n * Always decodes as string values, maintains the order\r\n * the tags were seriliazed in when converting a collection\r\n * of tags with the same key.\r\n *\r\n * @param deps\r\n * @param d\r\n */\r\nfunction unpackTags(deps, d) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        const tags = {};\r\n        for (const tag of d.tags) {\r\n            const { name, value } = yield decodeTag(deps, tag);\r\n            if (!tags.hasOwnProperty(name)) {\r\n                tags[name] = value;\r\n                continue;\r\n            }\r\n            tags[name] = [...tags[name], value];\r\n        }\r\n        return tags;\r\n    });\r\n}\r\nexports.unpackTags = unpackTags;\r\n"]},"metadata":{},"sourceType":"script"}