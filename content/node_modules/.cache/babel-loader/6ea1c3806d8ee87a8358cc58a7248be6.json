{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSignatureData = exports.DataItemJson = void 0;\n/**\r\n * Serialized format of a DataItem. Json.\r\n */\n\nclass DataItemJson {\n  constructor() {\n    this.owner = \"\";\n    this.target = \"\";\n    this.nonce = \"\";\n    this.tags = [];\n    this.data = \"\";\n    this.signature = \"\";\n    this.id = \"\";\n  }\n\n}\n\nexports.DataItemJson = DataItemJson;\n/**\r\n * Return the message that should be signed to produce a valid signature\r\n *\r\n * @param deps\r\n * @param d\r\n */\n\nfunction getSignatureData(deps, d) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return deps.deepHash([deps.utils.stringToBuffer(\"dataitem\"), deps.utils.stringToBuffer(\"1\"), deps.utils.b64UrlToBuffer(d.owner), deps.utils.b64UrlToBuffer(d.target), deps.utils.b64UrlToBuffer(d.nonce), [...d.tags.map(tag => [deps.utils.b64UrlToBuffer(tag.name), deps.utils.b64UrlToBuffer(tag.value)])], deps.utils.b64UrlToBuffer(d.data)]);\n  });\n}\n\nexports.getSignatureData = getSignatureData;","map":{"version":3,"sources":["/home/al/Desktop/koi/narcissus/content/node_modules/arweave-bundles/lib/ar-data-base.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","Object","defineProperty","exports","getSignatureData","DataItemJson","constructor","owner","target","nonce","tags","data","signature","id","deps","d","deepHash","utils","stringToBuffer","b64UrlToBuffer","map","tag","name"],"mappings":"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","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getSignatureData = exports.DataItemJson = void 0;\r\n/**\r\n * Serialized format of a DataItem. Json.\r\n */\r\nclass DataItemJson {\r\n    constructor() {\r\n        this.owner = \"\";\r\n        this.target = \"\";\r\n        this.nonce = \"\";\r\n        this.tags = [];\r\n        this.data = \"\";\r\n        this.signature = \"\";\r\n        this.id = \"\";\r\n    }\r\n}\r\nexports.DataItemJson = DataItemJson;\r\n/**\r\n * Return the message that should be signed to produce a valid signature\r\n *\r\n * @param deps\r\n * @param d\r\n */\r\nfunction getSignatureData(deps, d) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return deps.deepHash([\r\n            deps.utils.stringToBuffer(\"dataitem\"),\r\n            deps.utils.stringToBuffer(\"1\"),\r\n            deps.utils.b64UrlToBuffer(d.owner),\r\n            deps.utils.b64UrlToBuffer(d.target),\r\n            deps.utils.b64UrlToBuffer(d.nonce),\r\n            [\r\n                ...d.tags.map((tag) => [\r\n                    deps.utils.b64UrlToBuffer(tag.name),\r\n                    deps.utils.b64UrlToBuffer(tag.value),\r\n                ]),\r\n            ],\r\n            deps.utils.b64UrlToBuffer(d.data),\r\n        ]);\r\n    });\r\n}\r\nexports.getSignatureData = getSignatureData;\r\n"]},"metadata":{},"sourceType":"script"}