{"ast":null,"code":"/* This is free and unencumbered software released into the public domain. */\nfunction hash(algorithm, value) {\n  if (Number.isInteger(value)) {\n    let buff = new Uint8Array(16); // 128 bits\n\n    let view = new DataView(buff.buffer);\n    view.setBigUint64(0, BigInt(value), true);\n    value = buff;\n  }\n\n  if (value instanceof Uint8Array) {\n    let buffer = null;\n\n    switch (algorithm) {\n      case 'keccak256':\n        throw new Error(\"not implemented yet\");\n      // TODO\n\n      default:\n        throw new Error(\"not implemented yet\");\n      // TODO\n      //buffer = crypto.createHash(algorithm).update(value).digest()\n    }\n\n    return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n  }\n\n  throw new TypeError();\n}\n\nconst txSenderStack = [];\nexport var SmartWeave = null;\nexport class Panic extends Error {\n  constructor(message) {\n    super(message);\n    Object.setPrototypeOf(this, Panic.prototype);\n  }\n\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#clarity-type-system\n */\n\nexport class Err extends Error {\n  constructor(value) {\n    super(\"\"); // TODO\n\n    this.value = value;\n    Object.setPrototypeOf(this, Err.prototype);\n  }\n\n}\nexport function requireVersion(version) {// TODO: throw an error if the version isn't supported\n}\nexport function requireFeature(feature) {// TODO: throw an error if the feature isn't supported\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-add\n */\n\nexport function add(...args) {\n  return args.reduce((sum, operand) => sum + operand, 0);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#--subtract\n */\n\nexport function sub(...args) {\n  return args.slice(1).reduce((difference, operand) => difference - operand, args[0]);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-multiply\n */\n\nexport function mul(...args) {\n  return args.reduce((product, operand) => product * operand, 1);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-divide\n */\n\nexport function div(...args) {\n  return Math.trunc(args.slice(1).reduce((quotient, operand) => quotient / operand, args[0]));\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-less-than\n */\n\nexport function lt(a, b) {\n  return a < b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-less-than-or-equal\n */\n\nexport function le(a, b) {\n  return a <= b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-greater-than\n */\n\nexport function gt(a, b) {\n  return a > b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-greater-than-or-equal\n */\n\nexport function ge(a, b) {\n  return a >= b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#append\n */\n\nexport function append(list, value) {\n  return [...list, value];\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#as-contract\n */\n\nexport function asContract(expr) {\n  if (SmartWeave) {\n    try {\n      txSenderStack.unshift(SmartWeave.contract.id);\n      return expr();\n    } finally {\n      txSenderStack.shift();\n    }\n  }\n\n  throw new Error(\"as-contract not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#as-max-len\n */\n\nexport function asMaxLen(value, length) {\n  return value.length <= length ? some(value) : none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#at-block\n */\n\nexport function atBlock(blockHash, expr) {\n  if (SmartWeave) {\n    throw new Error(\"at-block not supported on SmartWeave\");\n  }\n\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#block-height\n */\n\nexport function blockHeight() {\n  if (SmartWeave) {\n    return SmartWeave.block.height;\n  }\n\n  throw new Error(\"block-height not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#concat\n */\n\nexport function concat(a, b) {\n  if (a instanceof Array && b instanceof Array) {\n    return [].concat(a, b);\n  }\n\n  if (a instanceof Uint8Array && b instanceof Uint8Array) {\n    const result = new Uint8Array(a.byteLength + b.byteLength);\n    result.set(a, 0);\n    result.set(b, a.byteLength);\n    return result;\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-call\n */\n\nexport function contractCall(contractName, functionName, ...args) {\n  if (SmartWeave) {\n    throw new Error(\"contract-call? not supported on SmartWeave\");\n  }\n\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-caller\n */\n\nexport function contractCaller() {\n  if (SmartWeave) {\n    return txSender();\n  }\n\n  throw new Error(\"contract-caller not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-of\n */\n\nexport function contractOf(contractName) {\n  if (SmartWeave) {\n    throw new Error(\"contract-of not supported on SmartWeave\");\n  }\n\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#default-to\n */\n\nexport function defaultTo(defaultValue, optionValue) {\n  return optionValue !== null && optionValue !== void 0 ? optionValue : defaultValue;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#err\n */\n\nexport function err(value) {\n  return new Err(value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#filter\n */\n\nexport function filter(func, list) {\n  if (list instanceof Array) {\n    return list.filter(func);\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#fold\n */\n\nexport function fold(func, list, initialValue) {\n  if (list instanceof Array) {\n    return list.reduce((accumulator, currentValue) => func(currentValue, accumulator), initialValue);\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-get-balance\n */\n\nexport function ftGetBalance(tokenName, principal) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-mint\n */\n\nexport function ftMint(tokenName, amount, recipient) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-transfer\n */\n\nexport function ftTransfer(tokenName, amount, sender, recipient) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#get\n */\n\nexport function get(keyName, tuple) {\n  return isNone(tuple) ? none : tuple.get(keyName);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#get-block-info\n */\n\nexport function getBlockInfo(propName, blockHeight) {\n  if (SmartWeave) {\n    throw new Error(\"get-block-info? not supported on SmartWeave\");\n  }\n\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#hash160\n */\n\nexport function hash160(value) {\n  if (Number.isInteger(value)) {\n    let buff = new Uint8Array(16); // 128 bits\n\n    let view = new DataView(buff.buffer);\n    view.setBigUint64(0, BigInt(value), true);\n    value = buff;\n  }\n\n  if (value instanceof Uint8Array) {\n    throw new Error(\"not implemented yet\"); // TODO\n    //const sha256 = crypto.createHash('sha256').update(value).digest()\n    //const buffer = crypto.createHash('ripemd160').update(sha256).digest()\n    //return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength)\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-eq\n */\n\nexport function isEq(...values) {\n  if (values.length > 0 && values.every(value => typeof value === typeof values[0])) {\n    return values.every(value => value === values[0]);\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-err\n */\n\nexport function isErr(value) {\n  return value instanceof Err;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-none\n */\n\nexport function isNone(value) {\n  return value === none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-ok\n */\n\nexport function isOk(value) {\n  return !(value instanceof Err);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-some\n */\n\nexport function isSome(value) {\n  return value !== none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#keccak256\n */\n\nexport function keccak256(value) {\n  return hash('keccak256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#len\n */\n\nexport function len(value) {\n  return value.length;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#list\n */\n\nexport function list(...values) {\n  if (values.length > 0 && values.some(value => typeof value !== typeof values[0])) {\n    throw new TypeError();\n  }\n\n  return values;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map\n */\n\nexport function map(func, list) {\n  if (list instanceof Array) {\n    return list.map(func);\n  }\n\n  throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-delete\n */\n\nexport function mapDelete(map, key) {\n  return map.delete(key);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-get\n */\n\nexport function mapGet(map, key) {\n  const value = map.get(key);\n  return value ? some(value) : none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-insert\n */\n\nexport function mapInsert(map, key, value) {\n  if (map.has(key)) return false;\n  map.set(key, value);\n  return true;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-set\n */\n\nexport function mapSet(map, key, value) {\n  map.set(key, value);\n  return true;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#match\n */\n\nexport function match(input, okBranch, errBranch) {\n  if (isNone(input) || isErr(input)) {\n    return errBranch(input);\n  }\n\n  return okBranch(input);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#mod\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Remainder\n */\n\nexport function mod(a, b) {\n  if (b === 0) {\n    throw new RangeError(\"division by zero\");\n  }\n\n  return a % b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-get-owner\n */\n\nexport function nftGetOwner(assetClass, assetID) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-mint\n */\n\nexport function nftMint(assetClass, assetID, recipient) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-transfer\n */\n\nexport function nftTransfer(assetClass, assetID, sender, recipient) {\n  throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#none\n */\n\nexport const none = null;\n/**\n * @link https://docs.blockstack.org/references/language-clarity#not\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT\n */\n\nexport function not(value) {\n  return !value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ok\n */\n\nexport function ok(value) {\n  return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#pow\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Exponentiation\n */\n\nexport function pow(a, b) {\n  return Math.pow(a, b); // TODO: handle overflow\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#print\n */\n\nexport function print(value) {\n  console.log(value);\n  return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha256\n */\n\nexport function sha256(value) {\n  return hash('sha256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha512\n */\n\nexport function sha512(value) {\n  return hash('sha512', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha512256\n */\n\nexport function sha512_256(value) {\n  return hash('sha512-256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#some\n */\n\nexport function some(value) {\n  return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#to-int\n */\n\nexport function toInt(value) {\n  return value; // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#to-uint\n */\n\nexport function toUint(value) {\n  return value; // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#try\n */\n\nexport function tryUnwrap(optionInput) {\n  if (isSome(optionInput) || isOk(optionInput)) {\n    return optionInput;\n  }\n\n  if (isErr(optionInput)) {\n    return optionInput.value; // TODO: local exit\n  }\n\n  return none; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#tuple\n */\n\nexport function tuple(...pairs) {\n  return pairs.reduce((tuple, [k, v]) => tuple.set(k, v), new Map());\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#tx-sender\n */\n\nexport function txSender() {\n  if (SmartWeave) {\n    if (txSenderStack.length > 0) {\n      return txSenderStack[0]; // see asContract()\n    }\n\n    return SmartWeave.transaction.owner;\n  }\n\n  throw new Error(\"tx-sender not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap\n */\n\nexport function unwrap(optionInput, thrownValue) {\n  if (isNone(optionInput) || isErr(optionInput)) {\n    return thrownValue;\n  }\n\n  return optionInput; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-err\n */\n\nexport function unwrapErr(responseInput, thrownValue) {\n  if (isErr(responseInput)) {\n    return responseInput.value;\n  }\n\n  return thrownValue; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-err-panic\n */\n\nexport function unwrapErrPanic(responseInput) {\n  if (isErr(responseInput)) {\n    return responseInput.value;\n  }\n\n  throw new Panic(\"unwrapErrPanic\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-panic\n */\n\nexport function unwrapPanic(optionInput) {\n  if (isNone(optionInput) || isErr(optionInput)) {\n    throw new Panic(\"unwrapPanic\");\n  }\n\n  return optionInput;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#xor\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_XOR\n */\n\nexport function xor(a, b) {\n  return a ^ b;\n}","map":{"version":3,"sources":["/home/al/Desktop/koi/narcissus/content/node_modules/@weavery/clarity/clarity.js"],"names":["hash","algorithm","value","Number","isInteger","buff","Uint8Array","view","DataView","buffer","setBigUint64","BigInt","Error","byteOffset","byteLength","TypeError","txSenderStack","SmartWeave","Panic","constructor","message","Object","setPrototypeOf","prototype","Err","requireVersion","version","requireFeature","feature","add","args","reduce","sum","operand","sub","slice","difference","mul","product","div","Math","trunc","quotient","lt","a","b","le","gt","ge","append","list","asContract","expr","unshift","contract","id","shift","asMaxLen","length","some","none","atBlock","blockHash","blockHeight","block","height","concat","Array","result","set","contractCall","contractName","functionName","contractCaller","txSender","contractOf","defaultTo","defaultValue","optionValue","err","filter","func","fold","initialValue","accumulator","currentValue","ftGetBalance","tokenName","principal","ftMint","amount","recipient","ftTransfer","sender","get","keyName","tuple","isNone","getBlockInfo","propName","hash160","isEq","values","every","isErr","isOk","isSome","keccak256","len","map","mapDelete","key","delete","mapGet","mapInsert","has","mapSet","match","input","okBranch","errBranch","mod","RangeError","nftGetOwner","assetClass","assetID","nftMint","nftTransfer","not","ok","pow","print","console","log","sha256","sha512","sha512_256","toInt","toUint","tryUnwrap","optionInput","pairs","k","v","Map","transaction","owner","unwrap","thrownValue","unwrapErr","responseInput","unwrapErrPanic","unwrapPanic","xor"],"mappings":"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","sourcesContent":["/* This is free and unencumbered software released into the public domain. */\nfunction hash(algorithm, value) {\n    if (Number.isInteger(value)) {\n        let buff = new Uint8Array(16); // 128 bits\n        let view = new DataView(buff.buffer);\n        view.setBigUint64(0, BigInt(value), true);\n        value = buff;\n    }\n    if (value instanceof Uint8Array) {\n        let buffer = null;\n        switch (algorithm) {\n            case 'keccak256':\n                throw new Error(\"not implemented yet\"); // TODO\n            default:\n                throw new Error(\"not implemented yet\"); // TODO\n            //buffer = crypto.createHash(algorithm).update(value).digest()\n        }\n        return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength);\n    }\n    throw new TypeError();\n}\nconst txSenderStack = [];\nexport var SmartWeave = null;\nexport class Panic extends Error {\n    constructor(message) {\n        super(message);\n        Object.setPrototypeOf(this, Panic.prototype);\n    }\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#clarity-type-system\n */\nexport class Err extends Error {\n    constructor(value) {\n        super(\"\"); // TODO\n        this.value = value;\n        Object.setPrototypeOf(this, Err.prototype);\n    }\n}\nexport function requireVersion(version) {\n    // TODO: throw an error if the version isn't supported\n}\nexport function requireFeature(feature) {\n    // TODO: throw an error if the feature isn't supported\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-add\n */\nexport function add(...args) {\n    return args.reduce((sum, operand) => sum + operand, 0);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#--subtract\n */\nexport function sub(...args) {\n    return args.slice(1).reduce((difference, operand) => difference - operand, args[0]);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-multiply\n */\nexport function mul(...args) {\n    return args.reduce((product, operand) => product * operand, 1);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-divide\n */\nexport function div(...args) {\n    return Math.trunc(args.slice(1).reduce((quotient, operand) => quotient / operand, args[0]));\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-less-than\n */\nexport function lt(a, b) {\n    return a < b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-less-than-or-equal\n */\nexport function le(a, b) {\n    return a <= b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-greater-than\n */\nexport function gt(a, b) {\n    return a > b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#-greater-than-or-equal\n */\nexport function ge(a, b) {\n    return a >= b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#append\n */\nexport function append(list, value) {\n    return [...list, value];\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#as-contract\n */\nexport function asContract(expr) {\n    if (SmartWeave) {\n        try {\n            txSenderStack.unshift(SmartWeave.contract.id);\n            return expr();\n        }\n        finally {\n            txSenderStack.shift();\n        }\n    }\n    throw new Error(\"as-contract not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#as-max-len\n */\nexport function asMaxLen(value, length) {\n    return value.length <= length ? some(value) : none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#at-block\n */\nexport function atBlock(blockHash, expr) {\n    if (SmartWeave) {\n        throw new Error(\"at-block not supported on SmartWeave\");\n    }\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#block-height\n */\nexport function blockHeight() {\n    if (SmartWeave) {\n        return SmartWeave.block.height;\n    }\n    throw new Error(\"block-height not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#concat\n */\nexport function concat(a, b) {\n    if (a instanceof Array && b instanceof Array) {\n        return [].concat(a, b);\n    }\n    if (a instanceof Uint8Array && b instanceof Uint8Array) {\n        const result = new Uint8Array(a.byteLength + b.byteLength);\n        result.set(a, 0);\n        result.set(b, a.byteLength);\n        return result;\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-call\n */\nexport function contractCall(contractName, functionName, ...args) {\n    if (SmartWeave) {\n        throw new Error(\"contract-call? not supported on SmartWeave\");\n    }\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-caller\n */\nexport function contractCaller() {\n    if (SmartWeave) {\n        return txSender();\n    }\n    throw new Error(\"contract-caller not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#contract-of\n */\nexport function contractOf(contractName) {\n    if (SmartWeave) {\n        throw new Error(\"contract-of not supported on SmartWeave\");\n    }\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#default-to\n */\nexport function defaultTo(defaultValue, optionValue) {\n    return optionValue !== null && optionValue !== void 0 ? optionValue : defaultValue;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#err\n */\nexport function err(value) {\n    return new Err(value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#filter\n */\nexport function filter(func, list) {\n    if (list instanceof Array) {\n        return list.filter(func);\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#fold\n */\nexport function fold(func, list, initialValue) {\n    if (list instanceof Array) {\n        return list.reduce((accumulator, currentValue) => func(currentValue, accumulator), initialValue);\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-get-balance\n */\nexport function ftGetBalance(tokenName, principal) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-mint\n */\nexport function ftMint(tokenName, amount, recipient) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ft-transfer\n */\nexport function ftTransfer(tokenName, amount, sender, recipient) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#get\n */\nexport function get(keyName, tuple) {\n    return isNone(tuple) ? none : tuple.get(keyName);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#get-block-info\n */\nexport function getBlockInfo(propName, blockHeight) {\n    if (SmartWeave) {\n        throw new Error(\"get-block-info? not supported on SmartWeave\");\n    }\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#hash160\n */\nexport function hash160(value) {\n    if (Number.isInteger(value)) {\n        let buff = new Uint8Array(16); // 128 bits\n        let view = new DataView(buff.buffer);\n        view.setBigUint64(0, BigInt(value), true);\n        value = buff;\n    }\n    if (value instanceof Uint8Array) {\n        throw new Error(\"not implemented yet\"); // TODO\n        //const sha256 = crypto.createHash('sha256').update(value).digest()\n        //const buffer = crypto.createHash('ripemd160').update(sha256).digest()\n        //return new Uint8Array(buffer.buffer, buffer.byteOffset, buffer.byteLength)\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-eq\n */\nexport function isEq(...values) {\n    if (values.length > 0 && values.every((value) => typeof value === typeof values[0])) {\n        return values.every((value) => value === values[0]);\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-err\n */\nexport function isErr(value) {\n    return value instanceof Err;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-none\n */\nexport function isNone(value) {\n    return value === none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-ok\n */\nexport function isOk(value) {\n    return !(value instanceof Err);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#is-some\n */\nexport function isSome(value) {\n    return value !== none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#keccak256\n */\nexport function keccak256(value) {\n    return hash('keccak256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#len\n */\nexport function len(value) {\n    return value.length;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#list\n */\nexport function list(...values) {\n    if (values.length > 0 && values.some((value) => typeof value !== typeof values[0])) {\n        throw new TypeError();\n    }\n    return values;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map\n */\nexport function map(func, list) {\n    if (list instanceof Array) {\n        return list.map(func);\n    }\n    throw new TypeError();\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-delete\n */\nexport function mapDelete(map, key) {\n    return map.delete(key);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-get\n */\nexport function mapGet(map, key) {\n    const value = map.get(key);\n    return value ? some(value) : none;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-insert\n */\nexport function mapInsert(map, key, value) {\n    if (map.has(key))\n        return false;\n    map.set(key, value);\n    return true;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#map-set\n */\nexport function mapSet(map, key, value) {\n    map.set(key, value);\n    return true;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#match\n */\nexport function match(input, okBranch, errBranch) {\n    if (isNone(input) || isErr(input)) {\n        return errBranch(input);\n    }\n    return okBranch(input);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#mod\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Remainder\n */\nexport function mod(a, b) {\n    if (b === 0) {\n        throw new RangeError(\"division by zero\");\n    }\n    return a % b;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-get-owner\n */\nexport function nftGetOwner(assetClass, assetID) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-mint\n */\nexport function nftMint(assetClass, assetID, recipient) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#nft-transfer\n */\nexport function nftTransfer(assetClass, assetID, sender, recipient) {\n    throw new Error(\"not implemented yet\"); // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#none\n */\nexport const none = null;\n/**\n * @link https://docs.blockstack.org/references/language-clarity#not\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_NOT\n */\nexport function not(value) {\n    return !value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#ok\n */\nexport function ok(value) {\n    return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#pow\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Exponentiation\n */\nexport function pow(a, b) {\n    return Math.pow(a, b); // TODO: handle overflow\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#print\n */\nexport function print(value) {\n    console.log(value);\n    return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha256\n */\nexport function sha256(value) {\n    return hash('sha256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha512\n */\nexport function sha512(value) {\n    return hash('sha512', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#sha512256\n */\nexport function sha512_256(value) {\n    return hash('sha512-256', value);\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#some\n */\nexport function some(value) {\n    return value;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#to-int\n */\nexport function toInt(value) {\n    return value; // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#to-uint\n */\nexport function toUint(value) {\n    return value; // TODO\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#try\n */\nexport function tryUnwrap(optionInput) {\n    if (isSome(optionInput) || isOk(optionInput)) {\n        return optionInput;\n    }\n    if (isErr(optionInput)) {\n        return optionInput.value; // TODO: local exit\n    }\n    return none; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#tuple\n */\nexport function tuple(...pairs) {\n    return pairs.reduce((tuple, [k, v]) => tuple.set(k, v), new Map());\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#tx-sender\n */\nexport function txSender() {\n    if (SmartWeave) {\n        if (txSenderStack.length > 0) {\n            return txSenderStack[0]; // see asContract()\n        }\n        return SmartWeave.transaction.owner;\n    }\n    throw new Error(\"tx-sender not supported\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap\n */\nexport function unwrap(optionInput, thrownValue) {\n    if (isNone(optionInput) || isErr(optionInput)) {\n        return thrownValue;\n    }\n    return optionInput; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-err\n */\nexport function unwrapErr(responseInput, thrownValue) {\n    if (isErr(responseInput)) {\n        return responseInput.value;\n    }\n    return thrownValue; // TODO: local exit\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-err-panic\n */\nexport function unwrapErrPanic(responseInput) {\n    if (isErr(responseInput)) {\n        return responseInput.value;\n    }\n    throw new Panic(\"unwrapErrPanic\");\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#unwrap-panic\n */\nexport function unwrapPanic(optionInput) {\n    if (isNone(optionInput) || isErr(optionInput)) {\n        throw new Panic(\"unwrapPanic\");\n    }\n    return optionInput;\n}\n/**\n * @link https://docs.blockstack.org/references/language-clarity#xor\n * @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_XOR\n */\nexport function xor(a, b) {\n    return a ^ b;\n}\n"]},"metadata":{},"sourceType":"module"}