{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=1)}([function(e,t,n){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||\"\",o=e[3];return o?t&&\"function\"==typeof btoa?(e=function(e){return e=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),e=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(e),\"/*# \".concat(e,\" */\")}(o),t=o.sources.map((function(e){return\"/*# sourceURL=\".concat(o.sourceRoot||\"\").concat(e,\" */\")})),[n].concat(t).concat([e]).join(\"\\n\")):[n].join(\"\\n\"):n}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(n,\"}\"):n})).join(\"\")},t.i=function(e,n,o){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var r={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(r[c]=!0)}for(var i=0;i<e.length;i++){var s=[].concat(e[i]);o&&r[s[0]]||(n&&(s[2]?s[2]=\"\".concat(n,\" and \").concat(s[2]):s[2]=n),t.push(s))}},t}},function(e,t,n){n(2),e.exports=n(5)},function(e,t,n){var o=n(3),r=n(4);n={insert:\"head\",singleton:!1};o(r=\"string\"==typeof(r=r.__esModule?r.default:r)?[[e.i,r,\"\"]]:r,n),e.exports=r.locals||{}},function(e,t,n){\"use strict\";var o,r,a=(r={},function(e){if(void 0===r[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}r[e]=t}return r[e]}),c=[];function i(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},o=[],r=0;r<e.length;r++){var a=e[r],s=t.base?a[0]+t.base:a[0],l=n[s]||0,f=\"\".concat(s,\" \").concat(l);n[s]=l+1,l=i(f),a={css:a[1],media:a[2],sourceMap:a[3]},-1!==l?(c[l].references++,c[l].updater(a)):c.push({identifier:f,updater:function(e,t){var n,o,r,a;return r=t.singleton?(a=m++,n=p=p||u(t),o=d.bind(null,n,a,!1),d.bind(null,n,a,!0)):(n=u(t),o=function(e,t,n){var o=n.css,r=n.media;n=n.sourceMap;if(r?e.setAttribute(\"media\",r):e.removeAttribute(\"media\"),n&&\"undefined\"!=typeof btoa&&(o+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n)))),\" */\")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}.bind(null,n,t),function(){!function(e){null!==e.parentNode&&e.parentNode.removeChild(e)}(n)}),o(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||o(e=t):r()}}(a,t),references:1}),o.push(f)}return o}function u(e){var t,o=document.createElement(\"style\"),r=e.attributes||{};if(void 0!==r.nonce||(t=n.nc)&&(r.nonce=t),Object.keys(r).forEach((function(e){o.setAttribute(e,r[e])})),\"function\"==typeof e.insert)e.insert(o);else{if(!(e=a(e.insert||\"head\")))throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");e.appendChild(o)}return o}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join(\"\\n\")});function d(e,t,n,o){n=n?\"\":o.media?\"@media \".concat(o.media,\" {\").concat(o.css,\"}\"):o.css,e.styleSheet?e.styleSheet.cssText=f(t,n):(o=document.createTextNode(n),(n=e.childNodes)[t]&&e.removeChild(n[t]),n.length?e.insertBefore(o,n[t]):e.appendChild(o))}var p=null,m=0;e.exports=function(e,t){(t=t||{}).singleton||\"boolean\"==typeof t.singleton||(t.singleton=o=void 0===o?Boolean(window&&document&&document.all&&!window.atob):o);var n=s(e=e||[],t);return function(e){if(e=e||[],\"[object Array]\"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=i(n[o]);c[r].references--}e=s(e,t);for(var a=0;a<n.length;a++){var u=i(n[a]);0===c[u].references&&(c[u].updater(),c.splice(u,1))}n=e}}}},function(e,t,n){\"use strict\";n.r(t);var o=n(0);(o=n.n(o)()(!1)).push([e.i,'body{margin:0;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Roboto\",\"Oxygen\",\"Ubuntu\",\"Cantarell\",\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,\"Courier New\",monospace}.App{text-align:center}.App-logo{height:40vmin;pointer-events:none}@media (prefers-reduced-motion:no-preference){.App-logo{-webkit-animation:App-logo-spin 20s linear infinite;animation:App-logo-spin 20s linear infinite}}.App-header{background-color:#282c34;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:calc(10px + 2vmin);color:#fff}.App-link{color:#61dafb}canvas{width:100vw;height:auto;z-index:999;position:absolute;display:block}canvas.narcissus:hover{display:none}img{height:auto;z-index:998;position:absolute;display:block}body,img{width:100vw}body{background:#000;overflow:hidden;height:100vh}span.scoreSpan{font-size:8rem;color:red;z-index:999;position:absolute;left:20px;bottom:2px}@media only screen and (min-width:500px){-webkit-transform:translateY(50%);transform:translateY(50%)}@-webkit-keyframes App-logo-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes App-logo-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',\"\"]),t.default=o},function(e,t){(this.webpackJsonpnarcissus=this.webpackJsonpnarcissus||[]).push([[0],{118:function(e,t){},270:function(e,t,n){},353:function(e,t){},355:function(e,t){},365:function(e,t){},367:function(e,t){},388:function(e,t){},463:function(e,t){},468:function(e,t){},470:function(e,t){},477:function(e,t){},489:function(e,t){},520:function(e,t){},547:function(e,t,n){},551:function(e,t,n){\"use strict\";n.r(t);var o=n(21),r=n.n(o),a=n(253),c=n.n(a),i=(t=(n(270),n(2)),n.n(t)),s=n(25),u=n(32),l=n(52),f=(a=n(254),t=n(265),n.n(t)),d=(n(547),n(23)),p=new a.Web;console.log(\"ktools\",p),c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)((function(){var e=Object(o.useState)(Object(d.jsx)(\"canvas\",{})),t=(c=Object(l.a)(e,2))[0],n=c[1],a=(e=Object(o.useState)(!0),e=(c=Object(l.a)(e,2))[0],c[1]),c=Object(o.useState)(0),m=(c=Object(l.a)(c,2))[0],b=c[1],g=Object(o.useRef)(null);Object(o.useEffect)((function(){v()}),[]),Object(o.useLayoutEffect)((function(){return console.log(\"useEffect score\",g,\"score is\",m),g.current?((e=document.createElement(\"span\")).innerText=m,e.className=\"scoreSpan\",g.current.appendChild(e)):console.log(\"not updating score because\",g.current),function(){var e,t=document.getElementsByClassName(\"scoreSpan\"),n=Object(u.a)(t);try{for(n.s();!(e=n.n()).done;)e.value.remove()}catch(e){n.e(e)}finally{n.f()}};var e}),[m]),Object(o.useLayoutEffect)((function(){if(console.log(\"useEffect\",g),!g.current)return console.log(\"not updating narcissus because\",g.current),void v();console.log(\"about to append because main is\",g.current,t);var e=document.createElement(\"span\");return e.innerText=m,e.className=\"scoreSpan\",t.className=\"narcissus\",g.current.appendChild(t),g.current.appendChild(e),function(){console.log(\"clean up\");var e,t=document.getElementsByClassName(\"narcissus\"),n=Object(u.a)(t);try{for(n.s();!(e=n.n()).done;)e.value.remove()}catch(e){n.e(e)}finally{n.f()}}}),[t]);var h,v=(h=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){return y.apply(this,arguments)}();case 2:return t=e.sent,console.log(\"setting frame\",t),e.next=6,function(){return j.apply(this,arguments)}(t);case 6:return e.abrupt(\"return\",{state:void 0,id:void 0});case 7:case\"end\":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)});function y(){return(y=Object(s.a)(i.a.mark((function e(){var t,n,o,r,a,c,s,l,f,d,m,g,h,v,y,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=window.location.pathname.split(\"/\")[1]||\"1ZjIecqKGYdGTFMWR9kdGrmi77lMmZnA6dxEzWulyjo\",e.next=4,p.readNftState(t);case 4:return n=e.sent,e.next=7,p.getContractState();case 7:a=e.sent,console.log(\"got state\",n),console.log(\"got koi\",a),o=n.decay.lockState||0,r=n.decay.lastLock,a=a.stateUpdate.trafficLogs.rewardReport,s=0,l=n.decay.lastMax||1,f=1,g=m=d=0,h=Object(u.a)(a);try{for(h.s();!(v=h.n()).done;)(y=v.value).dailyTrafficBlock>r&&(y.logsSummary,Object.keys(y.logsSummary).includes(t)&&((j=y.logsSummary[t])<l?(d===g-1&&(f+=f),g-10<m&&(f*=-1),s+=j*(1+f/100)):(l=j,m=g,s+=1e4),d=g)),g+=1}catch(e){h.e(e)}finally{h.f()}return s<1?(console.log(\"returning current\",o),c=o):225<(c=(225-o)*(10001-s))?c=225:c<0&&(c=0),console.log(\"newScore is\",c),b(c),e.abrupt(\"return\",c);case 27:return e.prev=27,e.t0=e.catch(0),console.log(\"error loading nft data\",e.t0),b(1),e.abrupt(\"return\",1);case 32:case\"end\":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function j(){return(j=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e,o){try{f()({url:\"./img/narcissus.gif\",frames:\"0-1000\",outputType:\"canvas\"}).then((function(o){var r=o[t].getImage();n(r),a(!1),e(o)})).catch(console.error.bind(console))}catch(e){console.log(\"err\",e),o(e)}})));case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)(\"div\",{className:\"App\",children:[e&&Object(d.jsx)(\"img\",{alt:\"this is the loading icon\",src:window.location.origin+\"/img/narcissus.gif\"}),!e&&Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)(\"header\",{}),Object(d.jsx)(\"main\",{ref:g}),Object(d.jsx)(\"img\",{src:\"./img/narcissus.gif\"})]})]})}),{})}),document.getElementById(\"root\"))}},[[551,1,2]]])}]);","extractedComments":[]}